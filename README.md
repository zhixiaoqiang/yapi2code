# YAPI TO CODE
<img src="https://socialify.git.ci/zhixiaoqiang/yapi2code/image?description=1&descriptionEditable=%E4%B8%80%E4%B8%AA%20VS%20Code%20%E6%89%A9%E5%B1%95%EF%BC%8C%E6%94%AF%E6%8C%81%E5%9F%BA%E4%BA%8E%20YAPI%20%E7%94%9F%E6%88%90%20JS%2FTS%2FDart%20%E4%BB%A3%E7%A0%81%EF%BC%8C%E5%BC%80%E7%AE%B1%E5%8D%B3%E7%94%A8%EF%BC%8C%E6%94%AF%E6%8C%81%E8%87%AA%E5%AE%9A%E4%B9%89&font=Inter&forks=1&issues=1&language=1&name=1&owner=1&pattern=Plus&stargazers=1&theme=Light" alt="ä¸€ä¸ªåŸºäº YAPI ç”Ÿæˆ TS/Dart çš„ VS Code æ‰©å±•ï¼Œæ— éœ€é…ç½®å³å¯æµè§ˆæ‰€æœ‰æ¥å£ï¼Œæ”¯æŒè‡ªå®šä¹‰æ¨¡æ¿" width="640" height="320" />

[marketplace.visualstudio](https://marketplace.visualstudio.com/items?itemName=zhixiaoqiang.yapi-to-code)

## ç‰¹æ€§

1. ğŸ™ˆ 0é…ç½®ã€å¼€ç®±å³ç”¨
2. ğŸ”¥ å…¨æ¥å£é¢„è§ˆ
3. âœ¨ å†…ç½‘å¯ç”¨
4. ğŸ˜¼ å¤šç§ç™»å½•æ–¹å¼
5. âš¡ï¸ é«˜æ€§èƒ½
6. âœï¸ æ”¯æŒ js é…ç½®è‡ªå®šä¹‰è¾“å‡º
7. âš¡ï¸ æé€Ÿçš„å¼€å‘ä½“éªŒ - Rspack
8. ...

**TODO:**

- [ ] 1. è‡ªå®šä¹‰ç”Ÿæˆæ¨¡ç‰ˆ & åˆ‡æ¢æ¨¡ç‰ˆé¢„è§ˆ
- [ ] 2. é¡¹ç›®ç»„å¯é€‰ - åŠ å¿«è¯·æ±‚ & æé«˜æ€§èƒ½
- [ ] 3. è¯·æ±‚å¼‚æ­¥åŠ è½½
- [ ] 4. ä¼˜åŒ–é¡µé¢æ€§èƒ½
- [ ] 5. æ”¯æŒè‡ªå®šä¹‰è§£æ
- [x] 6. yarn æ›¿æ¢ä¸º pnpm
- [x] 7. è¿ç§»åˆ° Rspack
- [ ] 8. å‡½æ•°ç±»å‹æ£€æµ‹ç”± `typescript` æ›¿æ¢ä¸º `ts-morph`ï¼Œæœ‰æ•ˆå‡å°‘ 90% ä½“ç§¯
- [ ] ...

## ç™»å½• YAPI

åˆæ¬¡ä½¿ç”¨ï¼Œè¾“å…¥ yapi çš„æœåŠ¡åœ°å€ & è´¦å·å¯†ç ï¼Œè¿›è¡Œç™»å½•

<img src="./public/login.png" width="300" />

## ä½¿ç”¨

ç™»å½•åï¼Œvscode ä¾¿æ‹¥æœ‰äº†è®¿é—® yapi æ¥å£çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿè‡ªåŠ¨æŠŠä»»æ„æ¥å£è½¬åŒ–ä¸ºç±»å‹

#### ä»£ç è¯Šæ–­åŠŸèƒ½

Yapi To Code å¯¹æ–‡æ¡£ä¸­æœªå®šä¹‰å‚æ•°ç±»å‹æˆ–è¿”å›å€¼ç±»å‹çš„æ¥å£è¿›è¡Œæ³¢æµªå½¢è­¦å‘Šï¼Œå¯ä»¥é€šè¿‡å¿«é€Ÿä¿®å¤ï¼ˆquick fixï¼‰ç›´æ¥æ·»åŠ æ¥å£ç±»å‹åˆ°é¡¹ç›®ä¸­ã€‚

<img src="https://qnm.hunliji.com/FnOC3c1bW5bzpRu23iArFXKTrMZH" width="800" />

#### æ¥å£æµè§ˆå™¨

Yapi To Code è¿˜æä¾›äº†æ¥å£é¢„è§ˆçš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡æœç´¢é€‰æ‹©æ¥å£å¯¹æ¥å£ç±»å‹è¿›è¡Œé¢„è§ˆï¼Œç„¶åæŠŠç±»å‹å¤åˆ¶åˆ°é¡¹ç›®ä¸­ã€‚

<img src="https://qnm.hunliji.com/FtK9IFJlRvKdPCA4jLNoEXs1xyKO" width="800" />

##### æ–°çª—å£ä¸­æ‰“å¼€

é»˜è®¤æ¥å£éƒ½ä¼šåœ¨ä¸€ä¸ªçª—å£é¢„è§ˆï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨æ–°çª—å£ä¸­é¢„è§ˆåˆ™å¯ä»¥ç‚¹å‡»å¦‚ä¸‹ Icon

<img src="./public/api-blank.png" width="300" />

##### å®šå‘åˆ·æ–° & æ¸…é™¤

æœ‰æ—¶å€™éƒ¨åˆ†æ¥å£æ›´æ–°äº†ï¼Œéœ€è¦å•ç‹¬åˆ·æ–°éƒ¨åˆ†çš„æ¥å£åˆ™å¯ä»¥åœ¨ tree ä¸ŠæŒ‰å³é”®è¿›è¡Œé‡æ–°è¯·æ±‚æ“ä½œ

æ¸…é™¤æ“ä½œä»…é™æ€åˆ é™¤å­é¡¹å†…å®¹

<img src="./public/tree-contextMenu.png" width="300" />

#### è‡ªå®šä¹‰æ¸²æŸ“

å·¥ä½œåŒºé…ç½®ï¼šå¯ä»¥ä¿®æ”¹ è¾“å‡ºçš„å­—æ®µã€ç±»å‹å¡«å……çš„ä½ç½®ç­‰

<img src="./public/config.png" width="300" />

</br>

é…ç½®æ–‡ä»¶ï¼š`yapi-to-code.config.cjs` **ä¼˜å…ˆçº§æ›´é«˜**

```js
module.exports = () => {
  return {
    // resType æ”¾ç½®çš„ä½ç½® æ˜¯å¤–å±‚çš„ Promise<T> è¿˜æ˜¯ä½œä¸ºè¯·æ±‚æ–¹æ³•çš„æ³›å‹
    // 'outerFunction' | 'fetchMethodGeneric'
    responseTypePosition: 'outerFunction',
    // ç”Ÿæˆ res åŒ…å«çš„å±æ€§ï¼Œé»˜è®¤ all, å¯æŒ‡å®šä¸º data
    responseKey: 'all',
    // è‡ªå®šä¹‰ç”Ÿæˆ request æ–¹æ³•
    genRequest(
      {
        comment,
        fnName,
        IReqTypeName,
        IResTypeName,
        requestFnName,
        apiPath,
      },
      data
    ) {
      return (
        `\n${comment}\n` +
        `export async function ${fnName}(params: I${IReqTypeName}) {
          return request.${requestFnName}<${IResTypeName}>('${apiPath}', params)
        }`
      )
    }
  }
}
```

## Webview & VS Code Data Flow.png

<img src="./public/webview-vscode-data-flow.png" alt="Webview & VS Code Data Flow" />

## å¼€å‘è°ƒè¯•

> éœ€è¦ä¾èµ– src/server src/webview çš„èµ„æº

### ç¼–è¯‘å‰ç½®ä¾èµ–

#### Rspack âš¡ï¸âš¡ï¸âš¡ï¸

```bash
pnpm i
cd src/server && pnpm start
cd src/webview && pnpm start
```

#### Webpack

```bash
pnpm i
cd src/server && pnpm start
cd src/webview && pnpm start
```

### é€‰æ‹© Client + Server

<img src="./public/debug.png" alt="debug" />

> Tips: node æ—¥å¿—åœ¨æºç ç¼–è¾‘å™¨çš„è°ƒè¯•æ§åˆ¶å°æŸ¥çœ‹ï¼Œwebview æ—¥å¿—åœ¨å”¤èµ·çš„ç¼–è¾‘å™¨å”¤èµ· devtool æŸ¥çœ‹

## æ‰“åŒ…å‘å¸ƒ

> é€šè¿‡ vsce æ‰“åŒ…å‘å¸ƒ VS Code Extension

```bash
pnpm package

pnpm pub
```
